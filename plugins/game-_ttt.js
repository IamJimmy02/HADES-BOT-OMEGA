import{format}from'util';const debugMode=!0x1,winScore=0x1387,playScore=0x63;export async function before(_0x254d59){let _0x25325d,_0x499bc9=!0x1,_0x45062c=!0x1,_0x5f351a=!0x1;this['game']=this['game']?this['game']:{};const _0x206d40=Object['values'](this['game'])['find'](_0xe3067b=>_0xe3067b['id']&&_0xe3067b['game']&&_0xe3067b['state']&&_0xe3067b['id']['startsWith']('tictactoe')&&[_0xe3067b['game']['playerX'],_0xe3067b['game']['playerO']]['includes'](_0x254d59['sender'])&&_0xe3067b['state']=='PLAYING');if(_0x206d40){if(!/^([1-9]|(me)?nyerah|\rendirse\|rendirse|RENDIRSE|surr?ender)$/i['test'](_0x254d59['text']))return!0x0;_0x5f351a=!/^[1-9]$/['test'](_0x254d59['text']);if(_0x254d59['sender']!==_0x206d40['game']['currentTurn']){if(!_0x5f351a)return!0x0;}debugMode&&_0x254d59['reply']('[DEBUG]\x0a'+require('util')['format']({'isSurrender':_0x5f351a,'text':_0x254d59['text']}));if(!_0x5f351a&&0x1>(_0x25325d=_0x206d40['game']['turn'](_0x254d59['sender']===_0x206d40['game']['playerO'],parseInt(_0x254d59['text'])-0x1)))return _0x254d59['reply']({'-3':'El\x20juego\x20ha\x20terminado','-2':'Inválido','-1':'Posición\x20inválida','0':'Posición\x20inválida'}[_0x25325d]),!0x0;if(_0x254d59['sender']===_0x206d40['game']['winner'])_0x499bc9=!![];else _0x206d40['game']['board']===0x1ff&&(_0x45062c=!![]);const _0x5d75bd=_0x206d40['game']['render']()['map'](_0x5b4b98=>{return{'X':'❎','O':'⭕',0x1:'1️⃣',0x2:'2️⃣',0x3:'3️⃣',0x4:'4️⃣',0x5:'5️⃣',0x6:'6️⃣',0x7:'7️⃣',0x8:'8️⃣',0x9:'9️⃣'}[_0x5b4b98];});_0x5f351a&&(_0x206d40['game']['_currentTurn']=_0x254d59['sender']===_0x206d40['game']['playerX'],_0x499bc9=!![]);const _0x4ffb89=_0x5f351a?_0x206d40['game']['currentTurn']:_0x206d40['game']['winner'],_0x4a0b81=('\x0a🎮\x20𝐓𝐑𝐄𝐒\x20𝐄𝐍\x20𝐑𝐀𝐘𝐀\x20🎮\x0a\x0a❎\x20=\x20@'+_0x206d40['game']['playerX']['split']('@')[0x0]+'\x0a⭕\x20=\x20@'+_0x206d40['game']['playerO']['split']('@')[0x0]+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5d75bd['slice'](0x0,0x3)['join']('')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5d75bd['slice'](0x3,0x6)['join']('')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5d75bd['slice'](0x6)['join']('')+'\x0a\x0a'+(_0x499bc9?'@'+(_0x5f351a?_0x206d40['game']['currentTurn']:_0x206d40['game']['winner'])['split']('@')[0x0]+'\x20𝙶𝙰𝙽𝙰𝚂𝚃𝙴\x20🥳,\x20𝚃𝙴\x20𝙻𝙻𝙴𝚅𝙰𝚂\x20+4999\x20𝚎𝚡𝚙':_0x45062c?'𝙴𝙻\x20𝙹𝚄𝙴𝙶𝙾\x20𝚃𝙴𝚁𝙼𝙸𝙽𝙾\x20𝙴𝙽\x20𝙴𝙼𝙿𝙰𝚃𝙴\x20😐':'𝚃𝚄𝚁𝙽𝙾\x20𝙳𝙴\x20@'+_0x206d40['game']['currentTurn']['split']('@')[0x0])+'\x0a')['trim'](),_0x5f4a38=global['db']['data']['users'];(_0x206d40['game']['_currentTurn']^_0x5f351a?_0x206d40['x']:_0x206d40['o'])!==_0x254d59['chat']&&(_0x206d40[_0x206d40['game']['_currentTurn']^_0x5f351a?'x':'o']=_0x254d59['chat']),_0x206d40['x']!==_0x206d40['o']&&await this['sendMessage'](_0x206d40['x'],{'text':_0x4a0b81,'mentions':this['parseMention'](_0x4a0b81)},{'quoted':_0x254d59}),await this['sendMessage'](_0x206d40['o'],{'text':_0x4a0b81,'mentions':this['parseMention'](_0x4a0b81)},{'quoted':_0x254d59}),(_0x45062c||_0x499bc9)&&(_0x5f4a38[_0x206d40['game']['playerX']]['exp']+=playScore,_0x5f4a38[_0x206d40['game']['playerO']]['exp']+=playScore,_0x499bc9&&(_0x5f4a38[_0x4ffb89]['exp']+=winScore-playScore),debugMode&&_0x254d59['reply']('[DEBUG]\x0a'+format(_0x206d40)),delete this['game'][_0x206d40['id']]);}return!0x0;}