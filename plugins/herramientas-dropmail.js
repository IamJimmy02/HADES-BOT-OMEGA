import _0x19b76c from'node-fetch';const handler=async(_0x522fa9,{conn:_0xd9dd48,isOwner:_0x3169e5,usedPrefix:_0x1484a1,command:_0x209911,text:_0x40f862})=>{_0xd9dd48['dropmail']=_0xd9dd48['dropmail']?_0xd9dd48['dropmail']:{};const _0x1d9331='dropmail',_0x13d178=['create','message','delete'],[_0xc0332e,_0x4f9c40,_0x3b284b,_0x1e1327,_0x42b43e]=_0x40f862['split']('\x20');if(!_0x13d178['includes'](_0xc0332e))return _0x522fa9['reply']('*Ejemplo:*\x0a'+_0x1484a1+_0x209911+'\x20create\x0a\x0a*Seleccione\x20un\x20tipo\x20existente*\x0a'+_0x13d178['map']((_0x3cde4b,_0x596581)=>'\x20\x20○\x20'+_0x3cde4b)['join']('\x0a'));if(_0x13d178['includes'](_0xc0332e)){if(_0xc0332e=='create')try{const _0x4a1c96=await random_mail(),_0x2120a3=new Date(_0x4a1c96[0x2])-new Date();_0xd9dd48['dropmail'][_0x1d9331]=[await _0x522fa9['reply']('*EMAIL:*\x0a'+_0x4a1c96[0x0]+'\x0a\x0a'+'*ID:*\x0a'+_0x4a1c96[0x1]+'\x0a\x0a*Expired:*\x0a'+msToTime(_0x2120a3)+'\x0a\x0a_Ejemplo\x20*'+_0x1484a1+_0x209911+'\x20message*\x20Para\x20comprobar\x20la\x20bandeja\x20de\x20entrada_'),_0x4a1c96[0x0],_0x4a1c96[0x1],_0x4a1c96[0x2]];}catch(_0x26d3c6){await _0x522fa9['reply'](eror);}if(_0xc0332e=='message'){if(!_0xd9dd48['dropmail'][_0x1d9331])return _0x522fa9['reply']('No\x20hay\x20mensajes,\x20cree\x20un\x20correo\x20electrónico\x20primero\x0aEjemplo\x20*'+_0x1484a1+_0x209911+'\x20create*');try{const _0x1eae49=await get_mails(_0xd9dd48['dropmail'][_0x1d9331][0x2]),_0x35e724=_0x1eae49[0x0]['map']((_0x2a0af2,_0x2460eb)=>{return('*EMAIL\x20[\x20'+(_0x2460eb+0x1)+'\x20]*\x0a*De*\x20:\x20'+_0x2a0af2['fromAddr']+'\x0a*Para*\x20:\x20'+_0x2a0af2['toAddr']+'\x0a\x0a*Mensaje*\x20:\x20'+_0x2a0af2['text']+'\x0a*Tamaño*\x20:\x20'+formatSize(_0x2a0af2['rawSize'])+'\x0a*Encabezamiento*\x20:\x20'+_0x2a0af2['headerSubject']+'\x0a*Download*\x20:\x20'+_0x2a0af2['downloadUrl']+'\x0a\x20\x20\x20')['trim']();})['filter'](_0x42d013=>_0x42d013)['join']('\x0a\x0a________________________\x0a\x0a');await _0x522fa9['reply'](_0x35e724||'*VACÍO*'+'\x0a\x0a_Ejemplo\x20*'+_0x1484a1+_0x209911+'\x20delete*\x20Para\x20eliminar\x20correos\x20electrónicos_');}catch(_0x89e67f){await _0x522fa9['reply'](eror);}}if(_0xc0332e=='delete'){if(!_0xd9dd48['dropmail'][_0x1d9331])return _0x522fa9['reply']('No\x20hay\x20correo\x20valido');try{delete _0xd9dd48['dropmail'][_0x1d9331],await _0x522fa9['reply']('Correo\x20electrónico\x20eliminado\x20con\x20éxito');}catch(_0x5f3ebe){await _0x522fa9['reply'](eror);}}}};handler['help']=['dropmail'],handler['tags']=['misc'],handler['command']=/^(dropmail)$/i,handler['register']=!![],handler['group']=!![];export default handler;function msToTime(_0x218c5e){const _0x2066a2=parseInt(_0x218c5e%0x3e8/0x64),_0xd5098d=Math['floor'](_0x218c5e/0x3e8%0x3c),_0x463788=Math['floor'](_0x218c5e/(0x3e8*0x3c)%0x3c),_0x211fdd=Math['floor'](_0x218c5e/(0x3e8*0x3c*0x3c)%0x18);return _0x211fdd+'h\x20'+_0x463788+'m\x20'+_0xd5098d+'s\x20'+_0x2066a2+'ms';}function formatSize(_0x401f0b){const _0x3ea8f3=['B','KB','MB','GB','TB'];let _0x245362=0x0;while(_0x401f0b>=0x400&&_0x245362<_0x3ea8f3['length']-0x1){_0x401f0b/=0x400,_0x245362++;}return _0x401f0b['toFixed'](0x2)+'\x20'+_0x3ea8f3[_0x245362];}async function random_mail(){const _0x4f807a='https://dropmail.me/api/graphql/web-test-wgq6m5i?query=mutation%20%7BintroduceSession%20%7Bid%2C%20expiresAt%2C%20addresses%20%7Baddress%7D%7D%7D';try{const _0x268e80=await _0x19b76c(_0x4f807a);if(!_0x268e80['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x268e80['status']);const _0x8cd752=await _0x268e80['json'](),_0x3411ae=_0x8cd752['data']['introduceSession']['addresses'][0x0]['address'],_0x3e1725=_0x8cd752['data']['introduceSession']['id'],_0x4d375b=_0x8cd752['data']['introduceSession']['expiresAt'];return[_0x3411ae,_0x3e1725,_0x4d375b];}catch(_0x23554a){console['log'](_0x23554a);}}async function get_mails(_0x4198e3){const _0x20ef79='https://dropmail.me/api/graphql/web-test-wgq6m5i?query=query%20(%24id%3A%20ID!)%20%7Bsession(id%3A%24id)%20%7B%20addresses%20%7Baddress%7D%2C%20mails%7BrawSize%2C%20fromAddr%2C%20toAddr%2C%20downloadUrl%2C%20text%2C%20headerSubject%7D%7D%20%7D&variables=%7B%22id%22%3A%22'+_0x4198e3+'%22%7D';try{const _0x24fd6d=await _0x19b76c(_0x20ef79);if(!_0x24fd6d['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x24fd6d['status']);const _0x42eb6b=await _0x24fd6d['json'](),_0x1db3bb=_0x42eb6b['data']['session']['mails'];return[_0x1db3bb,_0x1db3bb['length']];}catch(_0x4d2e01){console['log'](_0x4d2e01);}}